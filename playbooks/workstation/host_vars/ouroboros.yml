---
# Host-specific overrides for ouroboros (personal machine)
claude_code_advanced_hooks:
  # Hook 1: Block commits/PRs with forbidden content (emojis/branding)
  - event: PreToolUse
    tool: Bash
    type: command
    command: |
      python3 -c "
      import json, sys

      data = json.load(sys.stdin)
      cmd = data.get('tool_input', {}).get('command', '')

      forbidden = ['ü§ñ', 'Generated with', 'Co-Authored-By: Claude', 'claude.com/claude-code']

      msg = ''
      if 'git commit' in cmd and '-m' in cmd and any(f in cmd for f in forbidden):
          msg = '‚ùå BLOCKED: Forbidden content (emojis/branding)\\n\\n‚úÖ Use ONLY fabric output\\nGenerate: git diff --staged | fabric --pattern commit'
      elif 'gh pr create' in cmd and '--body' in cmd and any(f in cmd for f in forbidden):
          msg = '‚ùå BLOCKED: Forbidden content (emojis/branding)\\n\\n‚úÖ Use ONLY fabric output\\nGenerate: git diff main...HEAD | fabric --pattern pr'

      if msg:
          sys.stderr.write(msg + '\n')
          sys.exit(2)
      sys.exit(0)
      "

  # Hook 2: Sound notification when Claude finishes a task (custom sound for personal machine)
  - event: Stop
    tool: ""
    type: command
    command: "afplay \"$HOME/Jobs Done.mp3\""

  # Hook 3: Sound notification when Claude needs input
  - event: Notification
    tool: ""
    type: command
    command: "osascript -e 'beep 1'"
