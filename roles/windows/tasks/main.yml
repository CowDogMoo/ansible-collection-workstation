---
- name: Install chocolatey
  win_shell: |
    Set-ExecutionPolicy Bypass -Scope `
    Process -Force; `
    [System.Net.ServicePointManager]::SecurityProtocol = `
    [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; `
    iex ((New-Object System.Net.WebClient).`
    DownloadString('https://chocolatey.org/install.ps1'))

- name: Install packages with chocolatey
  win_chocolatey:
    name: "{{ pkgs }}"
    state: present

- name: Upgrade installed packages
  win_chocolatey:
    name: all
    state: latest
